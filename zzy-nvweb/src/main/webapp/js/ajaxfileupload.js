jQuery.extend({createUploadIframe:function(e,t){var o="jUploadFrame"+e,n="";return window.ActiveXObject&&("boolean"==typeof t?n="javascript:false":"string"==typeof t&&(n=t)),$('<iframe src="'+n+'" id="'+o+'" name="'+o+'" style="position:absolute;top:-1000em;left:-1000em;"></iframe>').appendTo("body")},createUploadForm:function(e,t,o){var n="jUploadForm"+e,a="jUploadFile"+e,r=$('<form  action="" method="POST" name="'+n+'" id="'+n+'" enctype="multipart/form-data"></form>'),c=$("#"+t),u=$(c).clone(!0);if($(c).attr("id",a),$(c).before(u),$(c).appendTo(r),"undefined"!=o)for(var d in o)o.hasOwnProperty(d)&&$("<input />").attr({type:"hidden",name:d,value:o[d]}).appendTo(r);return $(r).css("position","absolute").css("top","-1200px").css("left","-1200px"),$(r).appendTo("body"),r},ajaxFileUpload:function(e){e=jQuery.extend({},jQuery.ajaxSettings,e);var t=$("#"+e.fileElementId)[0].value.split(".");if(t=t[t.length-1].toLowerCase(),!new RegExp(e.allowType).test(t))return e.begin?e.begin(12):e.error(null,"error",12),!1;var o=(new Date).getTime(),n=jQuery.createUploadForm(o,e.fileElementId,e.extra),a=jQuery.createUploadIframe(o,e.secureuri),r="jUploadFrame"+o,c="jUploadForm"+o;e.global&&!jQuery.active++&&jQuery.event.trigger("ajaxStart"),e.begin&&e.begin("");var u=!1,d={};e.global&&jQuery.event.trigger("ajaxSend",[d,e]);var i=function(t){var o=document.getElementById(r);if(o.contentWindow?(d.responseText=o.contentWindow.document.body?o.contentWindow.document.body.innerHTML:null,d.responseXML=o.contentWindow.document.XMLDocument?o.contentWindow.document.XMLDocument:o.contentWindow.document,d.responsePar=paras(o.contentWindow.location.href)):o.contentDocument&&(d.responseText=o.contentDocument.document.body?o.contentDocument.document.body.innerHTML:null,d.responseXML=o.contentDocument.document.XMLDocument?o.contentDocument.document.XMLDocument:o.contentDocument.document,d.responsePar=paras(o.contentDocument.location.href)),d||"timeout"==t){u=!0;var a;if(a="timeout"!=t?"success":"error","error"!=a){var c=jQuery.uploadHttpData(d,e.dataType);e.success&&e.success(c,a),e.global&&jQuery.event.trigger("ajaxSuccess",[d,e])}else jQuery.handleError(e,d,a,"timeout"),$(o).remove(),$(n).remove();e.global&&jQuery.event.trigger("ajaxComplete",[d,e]),e.global&&!--jQuery.active&&jQuery.event.trigger("ajaxStop"),e.complete&&e.complete(d,a),jQuery(o).unbind(),setTimeout(function(){$(o)!=[]&&$(o).remove(),$(n)!=[]&&$(n).remove()},200),d=null}};if(e.timeout>0)var l=setTimeout(function(){u||i("timeout")},e.timeout);try{var a=$("#"+r),n=$("#"+c);$(n).attr("action",e.url),$(n).attr("method","POST"),$(n).attr("target",r),n.encoding?n.encoding="multipart/form-data":n.enctype="multipart/form-data",$(n).submit()}catch(t){jQuery.handleError(e,d,null,t)}return window.attachEvent?document.getElementById(r).attachEvent("onload",i):document.getElementById(r).addEventListener("load",i,!1),{abort:function(){try{$(a).remove(),$(n).remove(),clearTimeout(l)}catch(e){}}}},uploadHttpData:function(r,type){var data=!type;return data="xml"==type||data?r.responseXML:r.responseText,"script"==type&&jQuery.globalEval(data),"json"==type&&(data=data.match(/\{.*\}/)[0],eval("data = "+data)),"html"==type&&jQuery("<div>").html(data).evalScripts(),"redir"==type&&(data=r.responsePar),data}});
